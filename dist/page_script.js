function getFromStorage(t){return localStorage.getItem(t)}function saveInStorage(t,a){localStorage.setItem(t,a)}function get_auto(){return"true"==localStorage.getItem("automatic_update")}function enable_auto(){localStorage.setItem("automatic_update","true")}function disable_auto(){localStorage.setItem("automatic_update","false")}function setResults(t=12e3){saveInStorage("page_size",t)}function getStorage(){for(var t,a=[],o=Object.keys(localStorage),e=0;t=o[e];e++)a.push(t+"="+localStorage.getItem(t));return a}function getRandomInt(t,a){return Math.floor(t+Math.random()*(a-t))}function sleep(){let t=getRandomInt(2,4);return new Promise((a=>setTimeout(a,500*t)))}async function selecionarProximaCompra(t=-1){console.log("[Compra]",index_compra);let a=alvo_global??u(".fa-tasks");if(index_compra>=R.max(t,a.nodes.length))return console.debug("[Limite Atingido]- Compra"),!1;if(a.length>0){let t=u(a.nodes[index_compra]);return t.trigger("click"),t.off(),await sleep(),index_compra++,!0}return!1}async function testaCaptchaError(){return u(".p-toast-detail").length>0&&(console.error("[CAPTCHA] - erro"),await sleep(),!0)}async function changeLink(t){await log("Mudando Link",`${t}`),window.location.assign(t)}async function log(t,a){try{const o=await fetch("http://localhost:3000/log/Crawler",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({path:t,message:a})});if(!o.ok)throw new Error(`Response status: ${o.status}`);return}catch(o){console.error("[Erro][Log]",`${t}  ${a} ${o}`)}}async function getData(t){try{const a=await fetch(t);if(!a.ok)throw new Error(`Response status: ${a.status}`);return await a.json()}catch(a){return await log("Erro getData",`${t}`),{error:!0}}}async function crawl(){enable_auto();let t=await getData("http://localhost:3000/compra");await log("Existe Próxima Compra?",t?t.proxima_compra:"não"),t.proxima_compra?(await log("Crawler vai para próxima compra",t.proxima_compra),await getData(`http://localhost:3000/processar/${t.proxima_compra}`),await changeLink(`https://cnetmobile.estaleiro.serpro.gov.br/comprasnet-web/public/compras/acompanhamento-compra?compra=${t.proxima_compra}`)):(await log("Fim do Crawler","não há próxima compra"),disable_auto())}const auto=get_auto();auto&&setTimeout((async()=>{await crawl()}),5e3);